"""
Script para verificar se tudo estÃ¡ instalado e configurado corretamente
Execute: python check_installation.py
"""

import os
import sys

def check_python_version():
    """Verifica versÃ£o do Python"""
    version = sys.version_info
    print(f"ğŸ Python: {version.major}.{version.minor}.{version.micro}")
    if version.major >= 3 and version.minor >= 8:
        print("   âœ… VersÃ£o OK")
        return True
    else:
        print("   âŒ NecessÃ¡rio Python 3.8+")
        return False

def check_django():
    """Verifica se Django estÃ¡ instalado"""
    try:
        import django
        print(f"ğŸ¯ Django: {django.get_version()}")
        print("   âœ… Django instalado")
        return True
    except ImportError:
        print("âŒ Django nÃ£o instalado")
        print("   Instale: pip install Django==5.0")
        return False

def check_firebase():
    """Verifica se Firebase Admin estÃ¡ instalado"""
    try:
        import firebase_admin
        print(f"ğŸ”¥ Firebase Admin: instalado")
        print("   âœ… Firebase Admin instalado")
        return True
    except ImportError:
        print("âŒ Firebase Admin nÃ£o instalado")
        print("   Instale: pip install firebase-admin==6.4.0")
        return False

def check_credentials():
    """Verifica se o arquivo de credenciais existe"""
    cred_path = 'firebase_credentials.json'
    if os.path.exists(cred_path):
        print(f"ğŸ”‘ Credenciais Firebase: encontrado")
        print("   âœ… firebase_credentials.json OK")
        return True
    else:
        print("âš ï¸  firebase_credentials.json NÃƒO ENCONTRADO")
        print("   Baixe do Firebase Console:")
        print("   1. Firebase Console â†’ Seu Projeto")
        print("   2. âš™ï¸  ConfiguraÃ§Ãµes â†’ Contas de serviÃ§o")
        print("   3. 'Gerar nova chave privada'")
        print("   4. Salvar como 'firebase_credentials.json' na raiz")
        return False

def check_structure():
    """Verifica estrutura de pastas"""
    required_dirs = [
        'core',
        'core/templates',
        'core/templates/core',
        'static',
        'static/css',
        'setup'
    ]
    
    all_ok = True
    print("\nğŸ“ Estrutura de pastas:")
    for dir_path in required_dirs:
        if os.path.exists(dir_path):
            print(f"   âœ… {dir_path}")
        else:
            print(f"   âŒ {dir_path} - FALTANDO")
            all_ok = False
    
    return all_ok

def check_templates():
    """Verifica se os templates existem"""
    templates = [
        'core/templates/core/index.html',
        'core/templates/core/eventos.html',
        'core/templates/core/midia.html',
        'core/templates/core/equipes.html',
    ]
    
    all_ok = True
    print("\nğŸ“„ Templates:")
    for template in templates:
        if os.path.exists(template):
            print(f"   âœ… {template}")
        else:
            print(f"   âŒ {template} - FALTANDO")
            all_ok = False
    
    return all_ok

def check_static():
    """Verifica arquivos estÃ¡ticos"""
    if os.path.exists('static/css/style.css'):
        print("\nğŸ¨ CSS:")
        print("   âœ… static/css/style.css")
        return True
    else:
        print("\nğŸ¨ CSS:")
        print("   âŒ static/css/style.css - FALTANDO")
        return False

def main():
    print("=" * 60)
    print("ğŸ” VERIFICANDO INSTALAÃ‡ÃƒO - MANAGER MAKER")
    print("=" * 60)
    print()
    
    checks = [
        ("Python", check_python_version()),
        ("Django", check_django()),
        ("Firebase", check_firebase()),
        ("Credenciais", check_credentials()),
        ("Estrutura", check_structure()),
        ("Templates", check_templates()),
        ("CSS", check_static()),
    ]
    
    print("\n" + "=" * 60)
    print("ğŸ“Š RESUMO:")
    print("=" * 60)
    
    total = len(checks)
    passed = sum(1 for _, result in checks if result)
    
    for name, result in checks:
        status = "âœ…" if result else "âŒ"
        print(f"{status} {name}")
    
    print()
    print(f"Resultado: {passed}/{total} verificaÃ§Ãµes passaram")
    
    if passed == total:
        print("\nğŸ‰ TUDO OK! VocÃª pode rodar o projeto:")
        print("   python manage.py runserver")
    else:
        print("\nâš ï¸  Corrija os itens marcados com âŒ")
    
    print("=" * 60)

if __name__ == '__main__':
    main()